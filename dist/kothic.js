/*
 Copyright (c) 2011, Darafei Praliaskouski, Vladimir Agafonkin, Maksim Gurtovenko
 Kothic JS is a full-featured JavaScript map rendering engine using HTML5 Canvas.
 See http://github.com/kothic/kothic-js for more information.
*/
var Kothic={};
Kothic.render=function(){function a(j,a){return parseFloat(j.style["z-index"]||0)-parseFloat(a.style["z-index"]||0)}function i(j,z,n,b,f){var e=n.features,n=[],g,q,m,k,l,w;g=0;for(m=e.length;g<m;g++){l=k=e[g];w=b;var t=f,u=0;if(t)u=t.kothicId=t.kothicId||++r;var s=void 0,d=void 0,u=[MapCSS.currentStyle,u,JSON.stringify(l.properties),w,l.type].join(":");if(!c[u]){if(l.type=="Polygon"||l.type=="MultiPolygon")s="way",d="area";else if(l.type=="LineString"||l.type=="MultiLineString")s="way",d="line";else if(l.type==
"Point"||l.type=="MultiPoint")d=s="node";c[u]=MapCSS.restyle(l.properties,w,s,d);t&&t(c[u],l.properties,w,s,d)}l=c[u];for(q in l)if(l.hasOwnProperty(q)){w={};t=k;s=void 0;for(s in t)t.hasOwnProperty(s)&&(w[s]=t[s]);w.kothicId=g+1;w.style=l[q];n.push(w)}}n.sort(a);b=0;for(f=n.length;b<f;b++)q=n[b],e=parseFloat(q.properties.layer)||0,g=q.style["-x-mapnik-layer"],g=="top"&&(e=1E4),g=="bottom"&&(e=-1E4),e in j||(j[e]=[],z.push(e)),j[e].push(q);z.sort()}function e(j,a){for(var b in a)a.hasOwnProperty(b)&&
a[b]&&(j[b]=a[b])}function d(j,a,b){var h=a["fill-opacity"]||a.opacity;j.save();"fill-color"in a&&(e(j,{fillStyle:a["fill-color"],globalAlpha:h}),b());"fill-image"in a&&((a=MapCSS.getImage(a["fill-image"]))&&e(j,{fillStyle:j.createPattern(a,"repeat"),globalAlpha:h}),b());j.restore()}function t(j,a,b,h){h=MapCSS.restyle({},h,"canvas","canvas")["default"];j.save();d(j,h,function(){j.fillRect(-1,-1,a+1,b+1)});j.restore()}function y(j,a,b,h,e,c){var g=a.style,f=b&&b.style;u||(u=!0,j.beginPath());Kothic.path(j,
a,!1,!0,h,e,c);if(!b||!(f["fill-color"]===g["fill-color"]&&f["fill-image"]===g["fill-image"]&&f["fill-opacity"]===g["fill-opacity"]))j.save(),d(j,g,function(){j.fill()}),j.restore(),u=!1}function f(j,a,b){this.buffer=[];this.ctx=j;this.debugBoxes=a;this.debugChecks=b}function b(a,b,c,h,f,t,g,u){var m=b.style,k;a:switch(b.type){case "Point":k=b.coordinates;break;case "Polygon":k=b.reprpoint;break;case "LineString":k=b.coordinates[0];break;case "GeometryCollection":case "MultiPoint":case "MultiPolygon":case "MultiLineString":k=
void 0;break a}if(k){k=[h*k[0],f*(t-k[1])];var l;if(u){l=MapCSS.getImage(m["icon-image"]);if(!l)return;if(m["allow-overlap"]!="true"&&c.checkPointWH(k,l.width,l.height,b.kothicId))return}if(g){a.save();var g=m["text-halo-radius"]+2,d;d=m["font-family"];var r=m["font-size"];d=d||"";var r=r||9,o=d?d+", ":"";d=d.toLowerCase();var s=[];(d.indexOf("italic")!=-1||d.indexOf("oblique")!=-1)&&s.push("italic");d.indexOf("bold")!=-1&&s.push("bold");s.push(r+"px");o+=d.indexOf("serif")!=-1?"Georgia, serif":"Arial, Helvetica, sans-serif";
s.push(o);d=s.join(" ");e(a,{lineWidth:g,font:d});g=m.text+"";r=a.measureText(g).width;o=r/g.length*2.5;s=m["text-offset"]||0;if(m["text-allow-overlap"]!="true"&&c.checkPointWH([k[0],k[1]+s],r,o,b.kothicId)){a.restore();return}var i=m["text-opacity"]||m.opacity||1,y=m["text-color"]||"#000000",G=m["text-halo-color"]||"#ffffff";d="text-halo-radius"in m;i<1&&(y=(new RGBColor(y,i)).toRGBA(),G=(new RGBColor(G,i)).toRGBA());e(a,{fillStyle:y,strokeStyle:G,textAlign:"center",textBaseline:"middle"});if(b.type==
"Polygon"||b.type=="Point")d&&a.strokeText(g,k[0],k[1]+s),a.fillText(g,k[0],k[1]+s),h=parseFloat(m["-x-mapnik-min-distance"])||20,c.addPointWH([k[0],k[1]+s],r,o,h,b.kothicId);else if(b.type=="LineString"){r=b.coordinates;o=[];s=0;for(i=r.length;s<i;s++)o.push([h*r[s][0],f*(t-r[s][1])]);Kothic.textOnPath(a,o,g,d,c)}a.restore()}u&&(a.drawImage(l,Math.floor(k[0]-l.width/2),Math.floor(k[1]-l.height/2)),h=parseFloat(m["-x-mapnik-min-distance"])||0,c.addPointWH(k,l.width,l.height,h,b.kothicId))}}var c=
{},u=!1,r=0,o={strokeStyle:"rgba(0,0,0,0.5)",fillStyle:"rgba(0,0,0,0.5)",lineWidth:1,lineCap:"round",lineJoin:"round"};f.prototype={addBox:function(a){this.buffer.push(a)},addPointWH:function(a,b,c,f,e){a=this.getBoxFromPoint(a,b,c,f,e);this.buffer.push(a);if(this.debugBoxes)this.ctx.save(),this.ctx.strokeStyle="red",this.ctx.lineWidth="1",this.ctx.strokeRect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.ctx.restore()},checkBox:function(a){for(var b=0,c=this.buffer.length,f;b<c;b++)if(f=this.buffer[b],!(a[4]&&
a[4]==f[4])&&f[0]<=a[2]&&f[1]<=a[3]&&f[2]>=a[0]&&f[3]>=a[1]){if(this.debugChecks)this.ctx.save(),this.ctx.strokeStyle="darkblue",this.ctx.lineWidth="1",this.ctx.strokeRect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.ctx.restore();return!0}return!1},checkPointWH:function(a,b,f,c){return this.checkBox(this.getBoxFromPoint(a,b,f,0,c))},getBoxFromPoint:function(a,b,f,c,e){return[a[0]-b/2-c,a[1]-f/2-c,a[0]+b/2+c,a[1]+f/2+c,e]}};return function(a,c,d,r,v,B){var a=typeof a=="string"?document.getElementById(a):a,
g=a.getContext("2d"),q=a.width,m=a.height,k=c.granularity,l=q/k,w=m/k,C={},F=[],s=new f,H,L,G=+new Date,I,J,K;if(B)H=document.createElement("canvas"),H.width=q,H.height=m,L=g,g=H.getContext("2d");i(C,F,c,d,r);I=+new Date;e(g,o);var M=F.length,E,p,x,D,A,N;N=function(){s.addBox([0,0,q,0]);s.addBox([0,m,q,m]);s.addBox([q,0,q,m]);s.addBox([0,0,0,m]);for(E=M-1;E>=0;E--){x=C[F[E]];D=x.length;for(p=D-1;p>=0;p--)A=x[p].style,"icon-image"in A&&!A.text&&b(g,x[p],s,l,w,k,!1,!0);for(p=D-1;p>=0;p--)A=x[p].style,
A.text&&A["text-position"]=="line"&&b(g,x[p],s,l,w,k,!0,!1);for(p=D-1;p>=0;p--)A=x[p].style,A.text&&A["text-position"]!="line"&&!("icon-image"in A)&&b(g,x[p],s,l,w,k,!0,!1);for(p=D-1;p>=0;p--)A=x[p].style,"icon-image"in A&&A.text&&b(g,x[p],s,l,w,k,!0,!0)}K=+new Date;B&&L.drawImage(H,0,0);v({layersStyled:I-G,mapRendered:J-I,iconsAndTextRendered:K-J,total:K-G})};setTimeout(function(){t(g,q,m,d);for(E=0;E<M;E++){x=C[F[E]];D=x.length;for(p=0;p<D;p++)A=x[p].style,("fill-color"in A||"fill-image"in A)&&
y(g,x[p],x[p+1],l,w,k);g.lineCap="butt";for(p=0;p<D;p++)if("casing-width"in x[p].style){var a=g,b=x[p],c=x[p+1],f=l,j=w,r=k,h=b.style,o=c&&c.style,i=h["casing-dashes"]||h.dashes||!1;u||(u=!0,a.beginPath());Kothic.path(a,b,i,!1,f,j,r);if(!c||!(o.width===h.width&&o["casing-width"]===h["casing-width"]&&o["casing-color"]===h["casing-color"]&&o["casing-opacity"]===h["casing-opacity"]))a.save(),e(a,{lineWidth:2*h["casing-width"]+("width"in h?h.width:0),strokeStyle:h["casing-color"],lineCap:h["casing-linecap"]||
h.linecap,lineJoin:h["casing-linejoin"]||h.linejoin,globalAlpha:h["casing-opacity"]}),u=!1,a.stroke(),a.restore()}g.lineCap="round";for(p=0;p<D;p++)if("width"in x[p].style&&(a=g,b=x[p],c=x[p+1],f=l,j=w,r=k,h=b.style,o=c&&c.style,i=h.dashes,u||(u=!0,a.beginPath()),Kothic.path(a,b,i,!1,f,j,r),!c||!(o.width===h.width&&o.color===h.color&&o.opacity===h.opacity)))a.save(),e(a,{lineWidth:h.width,strokeStyle:h.color,lineCap:h.linecap,lineJoin:h.linejoin,globalAlpha:h.opacity}),u=!1,a.stroke(),a.restore();
J=+new Date}setTimeout(N,0)},0)}}();var MapCSS={styles:{},currentStyle:"",onError:function(){},onImagesLoad:function(){},e_min:function(){return Math.min.apply(null,arguments)},e_max:function(){return Math.max.apply(null,arguments)},e_any:function(){for(var a=0;a<arguments.length;a++)if(typeof arguments[a]!="undefined"&&arguments[a]!=="")return arguments[a];return""},e_num:function(a){return isNaN(parseFloat(a))?"":parseFloat(a)},e_str:function(a){return a},e_int:function(a){return parseInt(a,10)},e_tag:function(a,i){return i in a&&
a[i]!==null?a[i]:""},e_prop:function(a,i){return i in a&&a[i]!==null?a[i]:""},e_sqrt:function(a){return Math.sqrt(a)},e_boolean:function(a){return a=="0"||a=="false"||a===""?"false":"true"},e_boolean:function(a,i,e){return MapCSS.e_boolean(a)=="true"?i:e},e_metric:function(a){return/\d\s*mm$/.test(a)?1E3*parseInt(a,10):/\d\s*cm$/.test(a)?100*parseInt(a,10):/\d\s*dm$/.test(a)?10*parseInt(a,10):/\d\s*km$/.test(a)?0.0010*parseInt(a,10):/\d\s*in$/.test(a)?0.0254*parseInt(a,10):/\d\s*ft$/.test(a)?0.3048*
parseInt(a,10):parseInt(a,10)},e_zmetric:function(a){return MapCSS.metric(a)},loadStyle:function(a,i,e,d){MapCSS.styles[a]={restyle:i,images:e,external_images:d,textures:{}};if(!MapCSS.currentStyle)MapCSS.currentStyle=a},loadImages:function(a,i){var e=!i,d=!MapCSS.styles[a].external_images.length;if(d&&e)MapCSS.onImagesLoad();d||MapCSS._preloadExternalImages(a,function(){if((d=!0)&&e)MapCSS.onImagesLoad()});e||MapCSS._preloadSpriteImage(a,i,function(){e=!0;if(d&&e)MapCSS.onImagesLoad()})},_preloadSpriteImage:function(a,
i,e){var d=new Image;d.onload=function(){var t=MapCSS.styles[a].images,i;for(i in t)if(t.hasOwnProperty(i))t[i].sprite=d;e()};d.onerror=function(a){MapCSS.onError(a)};d.src=i},_preloadExternalImages:function(a,i){var e=MapCSS.styles[a].external_images;delete MapCSS.styles[a].external_images;for(var d=e.length,t=0,y=0;y<d;y++)(function(f){var b=new Image;b.onload=function(){t++;MapCSS.styles[a].images[f]={sprite:b,height:b.height,width:b.width,offset:0};t==d&&i()};b.onerror=function(){t++;t==d&&i()};
b.src=f})(e[y])},getImage:function(a){var i=MapCSS.styles[MapCSS.currentStyle],e=i.images[a];if(e.sprite){var d=document.createElement("canvas");d.width=e.width;d.height=e.height;d.getContext("2d").drawImage(e.sprite,0,e.offset,e.width,e.height,0,0,e.width,e.height);e=i.images[a]=d}return e},restyle:function(){return MapCSS.styles[MapCSS.currentStyle].restyle.apply(MapCSS,arguments)}};Kothic.path=function(){function a(a,e){d={pattern:e,seg:0,phs:0,x:a[0],y:a[1]}}function i(a,e){var f=d,b=e[0]-f.x,c=e[1]-f.y,u=Math.sqrt(b*b+c*c),r;a.save();a.translate(f.x,f.y);a.rotate(Math.atan2(c,b));a.moveTo(0,0);b=0;do{r=f.pattern[f.seg];b+=r-f.phs;c=b<u;if(!c)f.phs=r-(b-u),b=u;a[f.seg%2?"moveTo":"lineTo"](b,0);if(c)f.phs=0,f.seg=++f.seg%f.pattern.length}while(c);f.x=e[0];f.y=e[1];a.restore()}function e(a,e){return a[0]===0||a[0]==e||a[1]===0||a[1]==e}var d;return function(d,y,f,b,c,u,r){var o=
y.type,j=y.coordinates;o=="Polygon"&&(j=[j],o="MultiPolygon");o=="LineString"&&(j=[j],o="MultiLineString");var z,n,h,v,B=j.length,g,q,m,k,l;if(o=="MultiPolygon")for(z=0;z<B;z++){h=0;for(g=j[z].length;h<g;h++){v=j[z][h];q=v.length;m=v[0];for(n=0;n<=q;n++)k=v[n]||v[0],l=[c*k[0],u*(r-k[1])],n===0||!b&&e(k,r)&&e(m,r)?(m=f,d.moveTo(l[0],l[1]),m&&a(l,m)):b||!f?d.lineTo(l[0],l[1]):i(d,l),m=k}}if(o=="MultiLineString")for(z=0;z<B;z++){v=j[z];q=v.length;for(n=0;n<q;n++){k=v[n];if(e(k,r)&&y.properties.name==
"\ufffd\ufffd\ufffd\ufffd")debugger;l=[c*k[0],u*(r-k[1])];if((n===0||n==q-1)&&e(k,r))m=v[n?q-2:1],b=k[0]-m[0],k=k[1]-m[1],o=Math.sqrt(b*b+k*k),l=[l[0]+10*b/o,l[1]-10*k/o];n===0?(k=l,l=f,d.moveTo(k[0],k[1]),l&&a(k,l)):f?i(d,l):d.lineTo(l[0],l[1])}}}}();/*
 Use it if you like it
*/
function RGBColor(a,i){this.ok=!1;a.charAt(0)=="#"&&(a=a.substr(1,6));var a=a.replace(/ /g,""),a=a.toLowerCase(),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",
darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",
gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e[a]&&(a=e[a]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,
example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],d=0;d<e.length;d++){var t=e[d].process,y=e[d].re.exec(a);if(y)channels=t(y),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>
255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.a=i?i:1;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"};this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);a.length==1&&(a="0"+a);b.length==1&&(b="0"+b);c.length==1&&(c="0"+c);return"#"+a+b+c}};Kothic.textOnPath=function(){function a(a,c){if(!f[c])f[c]=a.measureText(c).width;return f[c]}function i(a,c){return[a[1]+0.5*Math.cos(a[0])*c,a[2]+0.5*Math.sin(a[0])*c]}function e(b,c,e,d){var d=d||0,f=a(b,c),c=a(b,c.charAt(0))*1.5,j=e[0],b=Math.abs(Math.cos(j)*f)+Math.abs(Math.sin(j)*c),c=Math.abs(Math.sin(j)*f)+Math.abs(Math.cos(j)*c);return[i(e,f+2*d),b,c,0]}function d(b,c,d,f){var o,j=0;for(o=0;o<=d.length;o++){if(b.checkPointWH.apply(b,e(c,d.charAt(o),f,j)))return!0;j+=a(c,d.charAt(o))}return!1}
function t(b,c,e){var d=c[4],f=i(c,a(b,d));b.save();b.translate(Math.floor(f[0]),Math.floor(f[1]));b.rotate(c[0]);b[e?"strokeText":"fillText"](d,0,0);b.restore()}function y(a,c){var e=a.length,d,f,j,i,n,h=0;n=0;for(i=1;i<e;i++){n=a[i];j=a[i-1];d=n[0]-j[0];f=n[1]-j[1];n=Math.sqrt(d*d+f*f);if(h+n>=c)return i=c-h,e=j[0]+d*i/n,j=j[1]+f*i/n,d=Math.atan2(f,d),[d,e,j,n-i];h+=n}}var f;return function(b,c,i,r,o){f={};var j=b.measureText(i).width,z=i.length,n,h=c.length,v,B,g,q=0;for(g=1;g<h;g++)v=c[g],B=c[g-
1],n=B[0]-v[0],v=B[1]-v[1],q+=Math.sqrt(n*n+v*v);n=q;if(!(n<j)){for(var m,k=0,l,w=!1,C,F=Math.PI/6;k<2;){v=k?a(b,i.charAt(0)):(n-j)/2;l=0;B=null;m=[];for(h=0;h<z;h++){g=y(c,v);if(v>=n||!g){k++;m=[];w&&(c.reverse(),w=!1);break}B||(B=g[0]);q=i.charAt(h);C=a(b,q);if(d(o,b,q,g)||Math.abs(B-g[0])>F)v+=C,h=-1,m=[],l=0;else{for(;C<g[3]&&h<z;)if(h++,q+=i.charAt(h),C=a(b,q),d(o,b,q,g)||Math.abs(B-g[0])>F){h=0;v+=C;m=[];l=0;q=i.charAt(h);C=a(b,q);g=y(c,v);break}if(g){if(g[0]>Math.PI/2||g[0]<-Math.PI/2)l+=q.length;
B=g[0];g.push(q);m.push(g);v+=C}}}l>z/2&&(c.reverse(),m=[],w?(k++,c.reverse(),w=!1):w=!0);if(k>=2)return;if(m.length>0)break}c=m.length;for(h=0;r&&h<c;h++)t(b,m[h],!0);for(h=0;h<c;h++){g=m[h];t(b,g);r=o;i=b;j=g[4];z=g;g=void 0;for(g=n=0;g<=j.length;g++)r.addPointWH.apply(r,e(i,j.charAt(g),z,n)),n+=a(i,j.charAt(g))}}}}();
